import{b as W,c as U,d as Z,e as A,f as B,g as Y}from"./chunk-DY7DWGHU.js";import{a as N,b as V,c as z}from"./chunk-S76Z7UMZ.js";import{g as L,j as $}from"./chunk-7INUDOVH.js";import{$ as _,Fa as M,Fb as T,Gb as R,Hb as F,Jb as k,Ka as g,Ra as l,Ta as i,Ua as a,Va as x,Wa as P,Xa as h,Ya as s,aa as v,ab as E,bb as o,cb as m,db as S,fb as C,gb as b,hb as y,jb as I,lb as O,nb as D,wa as r,xa as w}from"./chunk-NP4V3FYK.js";var j=()=>["/results"],q=(t,d)=>({season:t,round:d});function Q(t,d){if(t&1&&(i(0,"option",19),o(1),a()),t&2){let e=d.$implicit;l("value",e),r(),m(e)}}function H(t,d){t&1&&(i(0,"div"),x(1,"app-loading-spinner",20),a()),t&2&&(r(),l("message","Loading race schedule..."))}function G(t,d){if(t&1&&(i(0,"div",24),x(1,"app-error-message",20),a()),t&2){let e=s(2);r(),l("message",e.error)}}function J(t,d){t&1&&(i(0,"div",25)(1,"h4"),o(2,"No races found for the selected filter"),a()())}function K(t,d){if(t&1&&(i(0,"div",50)(1,"div",41),o(2,"Practice 1"),a(),i(3,"div",42),o(4),a()()),t&2){let e=s().$implicit,n=s(3);r(4),m(n.formatDate(e.FirstPractice.date))}}function X(t,d){if(t&1&&(i(0,"div",50)(1,"div",41),o(2,"Practice 2"),a(),i(3,"div",42),o(4),a()()),t&2){let e=s().$implicit,n=s(3);r(4),m(n.formatDate(e.SecondPractice.date))}}function ee(t,d){if(t&1&&(i(0,"div",50)(1,"div",41),o(2,"Practice 3"),a(),i(3,"div",42),o(4),a()()),t&2){let e=s().$implicit,n=s(3);r(4),m(n.formatDate(e.ThirdPractice.date))}}function te(t,d){if(t&1&&(i(0,"div",50)(1,"div",41),o(2,"Qualifying"),a(),i(3,"div",42),o(4),a()()),t&2){let e=s().$implicit,n=s(3);r(4),m(n.formatDate(e.Qualifying.date))}}function ne(t,d){if(t&1&&(i(0,"div",50)(1,"div",41),o(2,"Sprint"),a(),i(3,"div",42),o(4),a()()),t&2){let e=s().$implicit,n=s(3);r(4),m(n.formatDate(e.Sprint.date))}}function ie(t,d){if(t&1&&(i(0,"a",51),o(1," View Results "),a()),t&2){let e=s().$implicit;l("routerLink",I(2,j))("queryParams",O(3,q,e.season,e.round))}}function ae(t,d){if(t&1&&(i(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31),o(4),a(),i(5,"div",32),o(6),a()(),i(7,"div",33)(8,"h3",34),o(9),a(),i(10,"div",35),o(11),a(),i(12,"div",36)(13,"div",37),o(14,"Race Weekend"),a(),i(15,"div",38),g(16,K,5,1,"div",39)(17,X,5,1,"div",39)(18,ee,5,1,"div",39)(19,te,5,1,"div",39)(20,ne,5,1,"div",39),i(21,"div",40)(22,"div",41),o(23,"Race"),a(),i(24,"div",42),o(25),a()()()()(),i(26,"div",43)(27,"div",44),o(28),a(),i(29,"div",45)(30,"div",46),o(31),a(),i(32,"div",47),o(33),a()(),i(34,"div",48),g(35,ie,2,6,"a",49),a()()()()),t&2){let e=d.$implicit,n=s(3);r(4),m(e.round),r(2),m(e.Circuit.Location.country),r(3),m(e.raceName),r(2),m(e.Circuit.circuitName),r(5),l("ngIf",e.FirstPractice),r(),l("ngIf",e.SecondPractice),r(),l("ngIf",e.ThirdPractice),r(),l("ngIf",e.Qualifying),r(),l("ngIf",e.Sprint),r(5),m(n.formatDate(e.date)),r(2),l("ngClass",n.getRaceStatusClass(e)),r(),S(" ",n.getRaceStatus(e)," "),r(3),m(n.formatFullDate(e.date)),r(2),m(n.formatTime(e.time)),r(2),l("ngIf",n.isPastRace(e))}}function re(t,d){if(t&1&&(i(0,"div",26),g(1,ae,36,15,"div",27),a()),t&2){let e=s(2);r(),l("ngForOf",e.filteredRaces)}}function oe(t,d){if(t&1&&g(0,G,2,1,"div",21)(1,J,3,0,"div",22)(2,re,2,1,"div",23),t&2){let e=s();l("ngIf",e.error),r(),l("ngIf",!e.error&&e.filteredRaces.length===0),r(),l("ngIf",e.filteredRaces.length>0)}}var ve=(()=>{class t{constructor(e){this.f1Service=e,this.races=[],this.filteredRaces=[],this.isLoading=!0,this.error="",this.selectedSeason=2024,this.selectedFilter="all",this.availableYears=[];let n=2024;for(let c=n;c>=2e3;c--)this.availableYears.push(c)}ngOnInit(){this.loadSchedule()}loadSchedule(){this.isLoading=!0,this.error="",this.f1Service.getSeasonSchedule(this.selectedSeason).subscribe({next:e=>{this.races=e.MRData.RaceTable.Races,this.applyFilter(),this.isLoading=!1},error:e=>{console.error("Error loading race schedule:",e),this.error="Unable to load race schedule. Please try again later.",this.isLoading=!1}})}applyFilter(){let e=new Date;switch(this.selectedFilter){case"upcoming":this.filteredRaces=this.races.filter(n=>new Date(`${n.date}T${n.time||"00:00:00Z"}`)>e);break;case"past":this.filteredRaces=this.races.filter(n=>new Date(`${n.date}T${n.time||"00:00:00Z"}`)<e);break;default:this.filteredRaces=[...this.races]}}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short"}):"TBA"}formatFullDate(e){return e?new Date(e).toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"TBA"}formatTime(e){if(!e)return"Time TBA";let n=e.split("Z")[0],[c,p]=n.split(":"),f=new Date;return f.setHours(parseInt(c,10)),f.setMinutes(parseInt(p,10)),f.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}getRaceStatus(e){let n=new Date;if(new Date(`${e.date}T${e.time||"00:00:00Z"}`)<n)return"Completed";let p=this.races.filter(f=>new Date(`${f.date}T${f.time||"00:00:00Z"}`)>n);return p.length>0&&p[0].round===e.round?"Next Race":"Upcoming"}getRaceStatusClass(e){switch(this.getRaceStatus(e)){case"Completed":return"race-status status-completed";case"Next Race":return"race-status status-next-race";default:return"race-status status-upcoming"}}isPastRace(e){let n=new Date;return new Date(`${e.date}T${e.time||"00:00:00Z"}`)<n}static{this.\u0275fac=function(n){return new(n||t)(w(z))}}static{this.\u0275cmp=M({type:t,selectors:[["app-schedule"]],decls:30,vars:6,consts:[["scheduleContent",""],[1,"page-transition"],[1,"page-header","bg-f1-blue","text-white","mb-4"],[1,"container"],[1,"mb-2"],[1,"mb-0"],[1,"filters-container","mb-4"],[1,"row"],[1,"col-md-4"],[1,"form-group"],["for","seasonSelect",1,"form-label"],["id","seasonSelect",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","filterSelect",1,"form-label"],["id","filterSelect",1,"form-control",3,"ngModelChange","change","ngModel"],["value","all"],["value","upcoming"],["value","past"],[4,"ngIf","ngIfElse"],[3,"value"],[3,"message"],["class","mb-4",4,"ngIf"],["class","text-center my-5",4,"ngIf"],["class","race-schedule",4,"ngIf"],[1,"mb-4"],[1,"text-center","my-5"],[1,"race-schedule"],["class","f1-card race-card mb-4",4,"ngFor","ngForOf"],[1,"f1-card","race-card","mb-4"],[1,"row","g-0"],[1,"col-md-2","race-number-container","d-flex","flex-column","justify-content-center","align-items-center"],[1,"race-number"],[1,"race-flag"],[1,"col-md-7","race-details-container","p-3"],[1,"race-name"],[1,"circuit-name"],[1,"race-dates","mt-3"],[1,"race-dates-header"],[1,"dates-container"],["class","date-item",4,"ngIf"],[1,"date-item","race-day"],[1,"date-name"],[1,"date-value"],[1,"col-md-3","race-status-container","p-3"],[3,"ngClass"],[1,"race-date"],[1,"date"],[1,"time"],[1,"race-links","mt-3"],["class","btn f1-btn f1-btn-secondary btn-sm",3,"routerLink","queryParams",4,"ngIf"],[1,"date-item"],[1,"btn","f1-btn","f1-btn-secondary","btn-sm",3,"routerLink","queryParams"]],template:function(n,c){if(n&1){let p=P();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),o(4,"Race Calendar"),a(),i(5,"p",5),o(6),a()()(),i(7,"div",3)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),o(13,"Season"),a(),i(14,"select",11),y("ngModelChange",function(u){return _(p),b(c.selectedSeason,u)||(c.selectedSeason=u),v(u)}),h("change",function(){return _(p),v(c.loadSchedule())}),g(15,Q,2,2,"option",12),a()()(),i(16,"div",8)(17,"div",9)(18,"label",13),o(19,"Filter"),a(),i(20,"select",14),y("ngModelChange",function(u){return _(p),b(c.selectedFilter,u)||(c.selectedFilter=u),v(u)}),h("change",function(){return _(p),v(c.applyFilter())}),i(21,"option",15),o(22,"All Races"),a(),i(23,"option",16),o(24,"Upcoming Races"),a(),i(25,"option",17),o(26,"Past Races"),a()()()()()(),g(27,H,2,1,"div",18)(28,oe,3,3,"ng-template",null,0,D),a()()}if(n&2){let p=E(29);r(6),S("Formula 1 Race Schedule for ",c.selectedSeason,""),r(8),C("ngModel",c.selectedSeason),r(),l("ngForOf",c.availableYears),r(5),C("ngModel",c.selectedFilter),r(7),l("ngIf",c.isLoading)("ngIfElse",p)}},dependencies:[k,T,R,F,Y,A,B,Z,W,U,N,V,$,L],styles:['.page-header[_ngcontent-%COMP%]{padding:3rem 0;margin-top:-1rem;position:relative}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:5px;background-color:var(--f1-red)}.filters-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000000d}.form-label[_ngcontent-%COMP%]{font-weight:600;color:var(--f1-blue);margin-bottom:.5rem}.race-card[_ngcontent-%COMP%]{overflow:hidden;transition:transform .2s}.race-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.race-number-container[_ngcontent-%COMP%]{background-color:var(--f1-blue);color:#fff;padding:1.5rem}.race-number[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.race-flag[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.85rem;letter-spacing:1px}.race-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--f1-red);margin-bottom:.5rem}.circuit-name[_ngcontent-%COMP%]{color:var(--f1-dark-gray);font-size:1.1rem}.race-dates-header[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:var(--f1-blue)}.dates-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.date-item[_ngcontent-%COMP%]{padding:.5rem .75rem;background-color:var(--f1-light-gray);border-radius:4px;min-width:120px}.race-day[_ngcontent-%COMP%]{background-color:var(--f1-red);color:#fff}.date-name[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;margin-bottom:.25rem}.date-value[_ngcontent-%COMP%]{font-size:.9rem}.race-status-container[_ngcontent-%COMP%]{background-color:var(--f1-light-gray);display:flex;flex-direction:column}.race-status[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:4px;font-weight:600;text-align:center;margin-bottom:1rem}.status-upcoming[_ngcontent-%COMP%]{background-color:var(--f1-light-blue);color:#fff}.status-completed[_ngcontent-%COMP%]{background-color:var(--color-success);color:#fff}.status-next-race[_ngcontent-%COMP%]{background-color:var(--f1-red);color:#fff}.race-date[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.date[_ngcontent-%COMP%]{font-weight:600;color:var(--f1-blue)}.time[_ngcontent-%COMP%]{font-size:.9rem;color:var(--f1-dark-gray)}.race-links[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 768px){.race-number-container[_ngcontent-%COMP%]{padding:1rem;flex-direction:row;justify-content:space-between}.dates-container[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.date-item[_ngcontent-%COMP%]{min-width:auto}}']})}}return t})();export{ve as ScheduleComponent};
