import{a as k,b as Y,c as W,d as A,e as z,f as B,g as U}from"./chunk-DY7DWGHU.js";import{a as F,b as N,c as V}from"./chunk-S76Z7UMZ.js";import{g as R}from"./chunk-7INUDOVH.js";import{$ as f,Fa as w,Gb as O,Hb as T,Jb as P,Ka as h,Ra as l,Ta as i,Ua as r,Va as b,Wa as E,Xa as C,Ya as u,aa as g,ab as I,bb as a,cb as v,db as _,fb as x,gb as D,hb as S,kb as y,nb as L,wa as n,xa as M}from"./chunk-NP4V3FYK.js";var j=t=>["/drivers",t];function G(t,m){if(t&1&&(i(0,"option",17),a(1),r()),t&2){let e=m.$implicit;l("value",e),n(),v(e)}}function H(t,m){t&1&&(i(0,"div"),b(1,"app-loading-spinner",18),r()),t&2&&(n(),l("message","Loading drivers..."))}function J(t,m){if(t&1&&(i(0,"div",22),b(1,"app-error-message",18),r()),t&2){let e=u(2);n(),l("message",e.error)}}function K(t,m){t&1&&(i(0,"div",23)(1,"h4"),a(2,"No drivers found for the selected criteria"),r()())}function Q(t,m){if(t&1&&(i(0,"div",25)(1,"div",26)(2,"div",27),a(3),r(),i(4,"div",28)(5,"h3",29)(6,"a",30),a(7),i(8,"span",31),a(9),r()()(),i(10,"div",32)(11,"div",33)(12,"span",34),a(13,"Nationality"),r(),i(14,"span",35),a(15),r()(),i(16,"div",33)(17,"span",34),a(18,"Code"),r(),i(19,"span",35),a(20),r()(),i(21,"div",33)(22,"span",34),a(23,"Date of Birth"),r(),i(24,"span",35),a(25),r()()(),i(26,"div",36)(27,"a",37),a(28," View Profile "),r()()()()()),t&2){let e=m.$implicit,s=u(3);n(3),_(" ",e.permanentNumber||"N/A"," "),n(3),l("routerLink",y(8,j,e.driverId)),n(),_(" ",e.givenName," "),n(2),v(e.familyName),n(6),v(e.nationality),n(5),v(e.code||"N/A"),n(5),v(s.formatDate(e.dateOfBirth)),n(2),l("routerLink",y(10,j,e.driverId))}}function X(t,m){if(t&1&&(i(0,"div",7),h(1,Q,29,12,"div",24),r()),t&2){let e=u(2);n(),l("ngForOf",e.filteredDrivers)}}function Z(t,m){if(t&1&&h(0,J,2,1,"div",19)(1,K,3,0,"div",20)(2,X,2,1,"div",21),t&2){let e=u();l("ngIf",e.error),n(),l("ngIf",!e.error&&e.filteredDrivers.length===0),n(),l("ngIf",e.filteredDrivers.length>0)}}var le=(()=>{class t{constructor(e){this.f1Service=e,this.drivers=[],this.filteredDrivers=[],this.isLoading=!0,this.error="",this.selectedSeason=new Date().getFullYear(),this.searchTerm="",this.availableYears=[];let s=new Date().getFullYear();for(let o=s;o>=2e3;o--)this.availableYears.push(o)}ngOnInit(){this.loadDrivers()}loadDrivers(){this.isLoading=!0,this.error="",this.selectedSeason===new Date().getFullYear()?this.f1Service.getCurrentDrivers().subscribe({next:e=>{this.drivers=e.MRData.DriverTable.Drivers,this.filterDrivers(),this.isLoading=!1},error:e=>{console.error("Error loading drivers:",e),this.error="Unable to load drivers. Please try again later.",this.isLoading=!1}}):this.f1Service.getSeasonSchedule(this.selectedSeason).subscribe({next:e=>{if(e.MRData.RaceTable.Races.length>0){let s=e.MRData.RaceTable.Races[0],o=parseInt(s.season,10),c=parseInt(s.round,10);this.f1Service.getRaceResults(o,c).subscribe({next:p=>{if(p.MRData.RaceTable.Races.length>0){let d=p.MRData.RaceTable.Races[0];this.drivers=d.Results.map(q=>q.Driver),this.filterDrivers()}else this.drivers=[],this.filteredDrivers=[];this.isLoading=!1},error:p=>{console.error("Error loading historical drivers:",p),this.error="Unable to load historical drivers. Please try again later.",this.isLoading=!1}})}else this.drivers=[],this.filteredDrivers=[],this.isLoading=!1},error:e=>{console.error("Error loading race schedule:",e),this.error="Unable to load race schedule. Please try again later.",this.isLoading=!1}})}filterDrivers(){if(!this.searchTerm){this.filteredDrivers=[...this.drivers];return}let e=this.searchTerm.toLowerCase();this.filteredDrivers=this.drivers.filter(s=>s.givenName.toLowerCase().includes(e)||s.familyName.toLowerCase().includes(e)||s.nationality.toLowerCase().includes(e))}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}static{this.\u0275fac=function(s){return new(s||t)(M(V))}}static{this.\u0275cmp=w({type:t,selectors:[["app-drivers"]],decls:24,vars:6,consts:[["driversContent",""],[1,"page-transition"],[1,"page-header","bg-f1-blue","text-white","mb-4"],[1,"container"],[1,"mb-2"],[1,"mb-0"],[1,"filters-container","mb-4"],[1,"row"],[1,"col-md-4"],[1,"form-group"],["for","seasonSelect",1,"form-label"],["id","seasonSelect",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8"],["for","searchInput",1,"form-label"],["type","text","id","searchInput","placeholder","Search by name or nationality...",1,"form-control",3,"ngModelChange","input","ngModel"],[4,"ngIf","ngIfElse"],[3,"value"],[3,"message"],["class","mb-4",4,"ngIf"],["class","text-center my-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"mb-4"],[1,"text-center","my-5"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","mb-4"],[1,"f1-card","driver-card"],[1,"driver-number"],[1,"driver-info"],[1,"driver-name"],[1,"driver-link",3,"routerLink"],[1,"last-name"],[1,"driver-details"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"driver-actions","mt-3"],[1,"btn","f1-btn","f1-btn-primary","btn-sm",3,"routerLink"]],template:function(s,o){if(s&1){let c=E();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),a(4,"F1 Drivers"),r(),i(5,"p",5),a(6),r()()(),i(7,"div",3)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),a(13,"Season"),r(),i(14,"select",11),S("ngModelChange",function(d){return f(c),D(o.selectedSeason,d)||(o.selectedSeason=d),g(d)}),C("change",function(){return f(c),g(o.loadDrivers())}),h(15,G,2,2,"option",12),r()()(),i(16,"div",13)(17,"div",9)(18,"label",14),a(19,"Search"),r(),i(20,"input",15),S("ngModelChange",function(d){return f(c),D(o.searchTerm,d)||(o.searchTerm=d),g(d)}),C("input",function(){return f(c),g(o.filterDrivers())}),r()()()()(),h(21,H,2,1,"div",16)(22,Z,3,3,"ng-template",null,0,L),r()()}if(s&2){let c=I(23);n(6),_("Formula 1 Drivers for ",o.selectedSeason,""),n(8),x("ngModel",o.selectedSeason),n(),l("ngForOf",o.availableYears),n(5),x("ngModel",o.searchTerm),n(),l("ngIf",o.isLoading)("ngIfElse",c)}},dependencies:[P,O,T,U,z,B,k,A,Y,W,R,F,N],styles:['.page-header[_ngcontent-%COMP%]{padding:3rem 0;margin-top:-1rem;position:relative}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:5px;background-color:var(--f1-red)}.filters-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000000d}.form-label[_ngcontent-%COMP%]{font-weight:600;color:var(--f1-blue);margin-bottom:.5rem}.driver-card[_ngcontent-%COMP%]{position:relative;padding:1.5rem;height:100%;overflow:hidden}.driver-number[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;font-size:2.5rem;font-weight:800;color:#000e2f1a}.driver-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem;position:relative;z-index:1}.driver-link[_ngcontent-%COMP%]{color:var(--f1-blue);text-decoration:none;transition:color .2s}.driver-link[_ngcontent-%COMP%]:hover{color:var(--f1-red)}.last-name[_ngcontent-%COMP%]{text-transform:uppercase}.driver-details[_ngcontent-%COMP%]{margin-bottom:1.5rem}.detail-item[_ngcontent-%COMP%]{margin-bottom:.5rem;display:flex;justify-content:space-between}.detail-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--f1-medium-gray)}.detail-value[_ngcontent-%COMP%]{font-weight:600;color:var(--f1-blue)}.driver-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}']})}}return t})();export{le as DriversComponent};
