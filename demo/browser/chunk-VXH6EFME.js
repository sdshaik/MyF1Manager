import{a as $,b as A,c as B}from"./chunk-S76Z7UMZ.js";import{d as z,g as U}from"./chunk-7INUDOVH.js";import{Fa as O,Gb as w,Hb as N,Jb as F,Ka as v,Ra as o,Ta as n,Ua as i,Va as _,Ya as d,ab as g,ba as M,bb as a,ca as P,cb as c,db as I,eb as k,kb as f,nb as x,ta as E,wa as r,xa as D}from"./chunk-NP4V3FYK.js";var S=t=>["/drivers",t];function q(t,s){t&1&&(n(0,"div")(1,"div",5),_(2,"app-loading-spinner",6),i()()),t&2&&(r(2),o("message","Loading team details..."))}function V(t,s){if(t&1&&(n(0,"div",5),_(1,"app-error-message",6),n(2,"div",9)(3,"a",10),a(4,"Back to Teams"),i()()()),t&2){let e=d(2);r(),o("message",e.error)}}function W(t,s){t&1&&(n(0,"div"),_(1,"app-loading-spinner",6),i()),t&2&&(r(),o("message","Loading drivers..."))}function Z(t,s){if(t&1&&(n(0,"div",35),_(1,"app-error-message",6),i()),t&2){let e=d(4);r(),o("message",e.driversError)}}function J(t,s){t&1&&(n(0,"div",36)(1,"p"),a(2,"No drivers found for this team"),i()())}function K(t,s){if(t&1&&(n(0,"div",49),a(1),i()),t&2){let e=d().$implicit;r(),c(e.code)}}function Q(t,s){if(t&1&&(n(0,"div",50),a(1),i()),t&2){let e=d().$implicit;r(),I("Number: ",e.permanentNumber,"")}}function X(t,s){if(t&1&&(n(0,"div",38)(1,"div",39)(2,"div",40)(3,"a",41),a(4),n(5,"span",42),a(6),i()()(),n(7,"div",43),v(8,K,2,1,"div",44)(9,Q,2,1,"div",45),n(10,"div",46),a(11),i()(),n(12,"div",47)(13,"a",48),a(14,"View Driver"),i()()()()),t&2){let e=s.$implicit;r(3),o("routerLink",f(7,S,e.driverId)),r(),I(" ",e.givenName," "),r(2),c(e.familyName),r(2),o("ngIf",e.code),r(),o("ngIf",e.permanentNumber),r(2),c(e.nationality),r(2),o("routerLink",f(9,S,e.driverId))}}function Y(t,s){if(t&1&&(n(0,"div",20),v(1,X,15,11,"div",37),i()),t&2){let e=d(4);r(),o("ngForOf",e.teamDrivers)}}function ee(t,s){if(t&1&&v(0,Z,2,1,"div",32)(1,J,3,0,"div",33)(2,Y,2,1,"div",34),t&2){let e=d(3);o("ngIf",e.driversError),r(),o("ngIf",!e.driversError&&e.teamDrivers.length===0),r(),o("ngIf",e.teamDrivers.length>0)}}function te(t,s){t&1&&(n(0,"div"),_(1,"app-loading-spinner",6),i()),t&2&&(r(),o("message","Loading results..."))}function ne(t,s){if(t&1&&(n(0,"div",35),_(1,"app-error-message",6),i()),t&2){let e=d(4);r(),o("message",e.resultsError)}}function ie(t,s){t&1&&(n(0,"div",36)(1,"p"),a(2,"No recent results available for this team"),i()())}function re(t,s){if(t&1&&(n(0,"tr")(1,"td"),a(2),i(),n(3,"td"),a(4),i(),n(5,"td")(6,"a",41),a(7),i()(),n(8,"td",53),a(9),i(),n(10,"td",53),a(11),i(),n(12,"td",56),a(13),i()()),t&2){let e=s.$implicit,l=d(5);r(2),c(l.formatDate(e.raceDate)),r(2),c(e.raceName),r(2),o("routerLink",f(8,S,e.driver.driverId)),r(),k(" ",e.driver.givenName," ",e.driver.familyName," "),r(2),c(e.position),r(2),c(e.grid),r(2),c(e.points)}}function ae(t,s){if(t&1&&(n(0,"div")(1,"div",51)(2,"table",52)(3,"thead")(4,"tr")(5,"th"),a(6,"Date"),i(),n(7,"th"),a(8,"Grand Prix"),i(),n(9,"th"),a(10,"Driver"),i(),n(11,"th",53),a(12,"Position"),i(),n(13,"th",53),a(14,"Grid"),i(),n(15,"th",54),a(16,"Points"),i()()(),n(17,"tbody"),v(18,re,14,10,"tr",55),i()()()()),t&2){let e=d(4);r(18),o("ngForOf",e.getTeamResultEntries())}}function oe(t,s){if(t&1&&v(0,ne,2,1,"div",32)(1,ie,3,0,"div",33)(2,ae,19,1,"div",8),t&2){let e=d(3);o("ngIf",e.resultsError),r(),o("ngIf",!e.resultsError&&e.teamResults.length===0),r(),o("ngIf",e.teamResults.length>0)}}function le(t,s){if(t&1&&(n(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"a",14),M(),n(5,"svg",15),_(6,"path",16),i()(),P(),n(7,"h1",17),a(8),i()(),n(9,"div",18),a(10),i(),n(11,"a",19),a(12,"More info"),i()()(),n(13,"div",12)(14,"div",20)(15,"div",21)(16,"div",22)(17,"h3",23),a(18,"Team Information"),i(),n(19,"div",24)(20,"div",25),a(21,"Name"),i(),n(22,"div",26),a(23),i()(),n(24,"div",24)(25,"div",25),a(26,"Nationality"),i(),n(27,"div",26),a(28),i()(),n(29,"div",9)(30,"a",27),a(31,` Wikipedia Profile
`),i()()()(),n(32,"div",28)(33,"div",29)(34,"h3",23),a(35,"Current Drivers"),i(),v(36,W,2,1,"div",4)(37,ee,3,3,"ng-template",null,1,x),i()()(),n(39,"div",20)(40,"div",30)(41,"div",31)(42,"h3",23),a(43,"Recent Results"),i(),v(44,te,2,1,"div",4)(45,oe,3,3,"ng-template",null,2,x),i()()()()()),t&2){let e=g(38),l=g(46),m=d(2);r(8),c(m.teamConstructor==null?null:m.teamConstructor.name),r(2),c(m.teamConstructor==null?null:m.teamConstructor.nationality),r(),o("href",m.teamConstructor==null?null:m.teamConstructor.url,E),r(12),c(m.teamConstructor==null?null:m.teamConstructor.name),r(5),c(m.teamConstructor==null?null:m.teamConstructor.nationality),r(2),o("href",m.teamConstructor==null?null:m.teamConstructor.url,E),r(6),o("ngIf",m.isLoadingDrivers)("ngIfElse",e),r(8),o("ngIf",m.isLoadingResults)("ngIfElse",l)}}function se(t,s){if(t&1&&v(0,V,5,1,"div",7)(1,le,47,10,"div",8),t&2){let e=d();o("ngIf",e.error),r(),o("ngIf",!e.error&&e.constructor)}}var fe=(()=>{class t{constructor(e,l){this.route=e,this.f1Service=l,this.constructorId="",this.teamConstructor=null,this.isLoadingConstructor=!0,this.error="",this.teamDrivers=[],this.isLoadingDrivers=!0,this.driversError="",this.teamResults=[],this.isLoadingResults=!0,this.resultsError=""}ngOnInit(){this.constructorId=this.route.snapshot.paramMap.get("id")||"",this.constructorId?this.loadConstructorDetails():(this.error="Team ID is required",this.isLoadingConstructor=!1)}loadConstructorDetails(){this.isLoadingConstructor=!0,this.error="",this.f1Service.getConstructorDetails(this.constructorId).subscribe({next:e=>{e.MRData.ConstructorTable.Constructors.length>0?(this.teamConstructor=e.MRData.ConstructorTable.Constructors[0],this.loadTeamDrivers(),this.loadTeamResults()):this.error="Team not found",this.isLoadingConstructor=!1},error:e=>{console.error("Error loading team details:",e),this.error="Unable to load team details. Please try again later.",this.isLoadingConstructor=!1}})}loadTeamDrivers(){this.isLoadingDrivers=!0,this.driversError="",this.f1Service.getDriversBySeasonAndConstructor(2024,this.constructorId).subscribe({next:l=>{this.teamDrivers=l.MRData.DriverTable.Drivers,this.isLoadingDrivers=!1},error:l=>{console.error("Error loading team drivers:",l),this.driversError="Unable to load team drivers. Please try again later.",this.isLoadingDrivers=!1}})}loadTeamResults(){this.isLoadingResults=!0,this.resultsError="",this.f1Service.getSeasonSchedule(2024).subscribe({next:l=>{let m=l.MRData.RaceTable.Races,p=new Date,y=m.filter(h=>new Date(`${h.date}T${h.time||"00:00:00Z"}`)<p);if(y.length>0){let T=y.slice(-5).reverse().map(u=>{let C=parseInt(u.season,10),G=parseInt(u.round,10);return new Promise(b=>{this.f1Service.getRaceResults(C,G).subscribe({next:R=>{if(R.MRData.RaceTable.Races.length>0){let L=R.MRData.RaceTable.Races[0],H=L.Results.some(j=>j.Constructor.constructorId===this.constructorId);b(H?L:null)}else b(null)},error:()=>b(null)})})});Promise.all(T).then(u=>{this.teamResults=u.filter(C=>C!==null),this.isLoadingResults=!1})}else this.teamResults=[],this.isLoadingResults=!1},error:l=>{console.error("Error loading race schedule:",l),this.resultsError="Unable to load team results. Please try again later.",this.isLoadingResults=!1}})}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}getTeamResultEntries(){let e=[];return this.teamResults.forEach(l=>{l.Results.filter(p=>p.Constructor.constructorId===this.constructorId).forEach(p=>{e.push({raceDate:l.date,raceName:l.raceName,driver:p.Driver,position:p.position,grid:p.grid,points:p.points})})}),e}static{this.\u0275fac=function(l){return new(l||t)(D(z),D(B))}}static{this.\u0275cmp=O({type:t,selectors:[["app-team-detail"]],decls:4,vars:2,consts:[["constructorContent",""],["driversContent",""],["resultsContent",""],[1,"page-transition"],[4,"ngIf","ngIfElse"],[1,"container","py-5"],[3,"message"],["class","container py-5",4,"ngIf"],[4,"ngIf"],[1,"mt-4"],["routerLink","/teams",1,"btn","f1-btn","f1-btn-primary"],[1,"team-header","bg-f1-blue","text-white","mb-4"],[1,"container"],[1,"d-flex","align-items-center","mb-3"],["routerLink","/teams",1,"text-white","me-3","back-link"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["fill-rule","evenodd","d","M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"],[1,"mb-0"],[1,"nationality"],["target","_blank",3,"href"],[1,"row"],[1,"col-md-4","mb-4"],[1,"f1-card","team-info-card"],[1,"card-title"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["target","_blank",1,"btn","f1-btn","f1-btn-secondary",3,"href"],[1,"col-md-8","mb-4"],[1,"f1-card","team-drivers-card"],[1,"col-12"],[1,"f1-card","recent-results"],["class","mb-4",4,"ngIf"],["class","text-center my-4",4,"ngIf"],["class","row",4,"ngIf"],[1,"mb-4"],[1,"text-center","my-4"],["class","col-md-6 mb-3",4,"ngFor","ngForOf"],[1,"col-md-6","mb-3"],[1,"driver-card","f1-card"],[1,"driver-name"],[1,"driver-link",3,"routerLink"],[1,"text-uppercase","fw-bold"],[1,"driver-info","mt-2"],["class","driver-code",4,"ngIf"],["class","driver-number",4,"ngIf"],[1,"driver-nationality"],[1,"mt-3"],[1,"btn","f1-btn","f1-btn-primary","btn-sm",3,"routerLink"],[1,"driver-code"],[1,"driver-number"],[1,"table-responsive"],[1,"f1-table"],[1,"text-center"],[1,"text-end"],[4,"ngFor","ngForOf"],[1,"text-end","fw-bold"]],template:function(l,m){if(l&1&&(n(0,"div",3),v(1,q,3,1,"div",4)(2,se,2,2,"ng-template",null,0,x),i()),l&2){let p=g(3);r(),o("ngIf",m.isLoadingConstructor)("ngIfElse",p)}},dependencies:[F,w,N,U,$,A],styles:['.team-header[_ngcontent-%COMP%]{padding:3rem 0;margin-top:-1rem;position:relative}.team-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:5px;background-color:var(--f1-red)}.back-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;text-decoration:none;transition:transform .2s}.back-link[_ngcontent-%COMP%]:hover{transform:translate(-5px)}.nationality[_ngcontent-%COMP%]{font-size:1.2rem;opacity:.8}.card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1.5rem;padding-bottom:.75rem;border-bottom:2px solid var(--f1-light-gray);color:var(--f1-blue)}.f1-card[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:2rem}.team-info-card[_ngcontent-%COMP%]{height:100%}.info-item[_ngcontent-%COMP%]{margin-bottom:1.25rem}.info-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--f1-medium-gray);margin-bottom:.25rem}.info-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--f1-blue)}.driver-card[_ngcontent-%COMP%]{padding:1.5rem;height:100%}.driver-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.driver-link[_ngcontent-%COMP%]{color:var(--f1-blue);text-decoration:none;transition:color .2s}.driver-link[_ngcontent-%COMP%]:hover{color:var(--f1-red)}.driver-code[_ngcontent-%COMP%]{font-weight:700;color:var(--f1-blue);margin-bottom:.25rem}.driver-number[_ngcontent-%COMP%], .driver-nationality[_ngcontent-%COMP%]{font-size:.9rem;color:var(--f1-dark-gray)}']})}}return t})();export{fe as TeamDetailComponent};
